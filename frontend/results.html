<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Outbound — Results</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      .home-button {
        position: fixed;
        top: 20px;
        left: 20px;
        padding: 0.35rem 0.9rem;
        border: 1px solid var(--border, #e2e8f0);
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.95);
        color: inherit;
        text-decoration: none;
        font-size: 1rem;
        cursor: pointer;
        z-index: 1000;
        box-shadow: 0 4px 10px rgba(15, 23, 42, 0.12);
      }
      #best-option,
      #backup-options {
        margin-bottom: 1.5rem;
      }
      .flight-card {
        border: 1px solid var(--border, #e2e8f0);
        border-radius: 14px;
        padding: 1rem 1.25rem;
        margin-top: 0.75rem;
        background: #fff;
        box-shadow: 0 6px 14px rgba(15, 23, 42, 0.08);
        transition: background-color 150ms ease, box-shadow 150ms ease;
        cursor: pointer;
      }
      .flight-card + .flight-card {
        margin-top: 1rem;
      }
      .flight-card:hover {
        background: #f8fafc;
        box-shadow: 0 12px 24px rgba(15, 23, 42, 0.15);
      }
      .modal-overlay {
        position: fixed;
        inset: 0;
        background: #0008;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1.5rem;
        z-index: 2000;
      }
      .modal-box {
        background: #fff;
        border-radius: 16px;
        padding: 1.5rem;
        max-width: 500px;
        width: 100%;
        box-shadow: 0 20px 40px rgba(15, 23, 42, 0.25);
      }
      .modal-box h3 {
        margin-top: 0;
        margin-bottom: 0.75rem;
      }
      .modal-list {
        list-style: none;
        padding: 0;
        margin: 0 0 1rem;
      }
      .modal-list li {
        margin-bottom: 0.45rem;
      }
    </style>
  </head>
  <body>
    <a href="index.html" class="home-button" aria-label="Back to home">← Home</a>
    <main>
      <section class="hero" id="results-hero" style="min-height:auto;padding:2rem 1.25rem 1rem;">
        <div class="hero-inner" style="padding:0;">
          <h1>Your Trip Plan</h1>
          <p class="tagline">A quick summary of your flights, stays, and activities.</p>
          <div class="actions" style="margin-top:1rem;justify-content:center;">
            <a href="chat.html" class="btn btn-primary" data-testid="back-to-chat-btn">Back</a>
          </div>
        </div>
      </section>
      <section class="planner" aria-label="Trip results" style="padding-top:1rem;">
        <div class="planner-inner">
          <section id="best-option">
            <h2>Best Option</h2>
            <div class="flight-card" data-flight="best">
              <p>Airline: ExampleAir</p>
              <p>Flight: EA123</p>
              <p>Duration: 5h 20m</p>
              <p>Stops: Non-stop</p>
            </div>
          </section>

          <section id="backup-options">
            <h2>Backup Options</h2>
            <div class="flight-card" data-flight="alt1">
              <p>Airline: Skyline Airways</p>
              <p>Flight: SK456</p>
              <p>Duration: 6h 5m</p>
              <p>Stops: 1 stop</p>
            </div>
            <div class="flight-card" data-flight="alt2">
              <p>Airline: Northwind</p>
              <p>Flight: NW212</p>
              <p>Duration: 5h 50m</p>
              <p>Stops: Non-stop</p>
            </div>
            <div class="flight-card" data-flight="alt3">
              <p>Airline: HorizonJet</p>
              <p>Flight: HJ904</p>
              <p>Duration: 6h 30m</p>
              <p>Stops: 2 stops</p>
            </div>
          </section>
        </div>
      </section>
    </main>
    <script>
      (function () {
        const flightDetails = {
          best: {
            heading: "ExampleAir · Flight EA123",
            airline: "ExampleAir",
            flight: "EA123",
            duration: "5h 20m",
            stops: "Non-stop",
            price: "$845 roundtrip",
            hotels: "Suggested stay: Harborfront Hotel (3 nights)",
            itinerary: "Arrive mid-day · Afternoon city walk · Day 2 meetings · Day 3 departure",
          },
          alt1: {
            heading: "Skyline Airways · Flight SK456",
            airline: "Skyline Airways",
            flight: "SK456",
            duration: "6h 5m",
            stops: "1 stop in DEN",
            price: "$720 roundtrip",
            hotels: "Suggested stay: Skyline Suites (2 nights)",
            itinerary: "Evening arrival · Morning client visit · Free afternoon for scouting",
          },
          alt2: {
            heading: "Northwind · Flight NW212",
            airline: "Northwind",
            flight: "NW212",
            duration: "5h 50m",
            stops: "Non-stop",
            price: "$910 roundtrip",
            hotels: "Suggested stay: Northwind Residences (4 nights)",
            itinerary: "Direct flight · Includes lounge access · Ideal for quick turnarounds",
          },
          alt3: {
            heading: "HorizonJet · Flight HJ904",
            airline: "HorizonJet",
            flight: "HJ904",
            duration: "6h 30m",
            stops: "2 stops (PHX, SEA)",
            price: "$640 roundtrip",
            hotels: "Suggested stay: Cityline Hotel (2 nights)",
            itinerary: "Budget-friendly route with overnight layover options",
          },
          default: {
            heading: "Flight option",
            airline: "Example carrier",
            flight: "XX000",
            duration: "6h",
            stops: "Non-stop",
            price: "$800 roundtrip",
            hotels: "Suggested stay: Standard Hotel (3 nights)",
            itinerary: "Sample itinerary details here",
          },
        };

        function openModal(info) {
          const activeOverlay = document.querySelector(".modal-overlay");
          if (activeOverlay) activeOverlay.remove();

          const overlay = document.createElement("div");
          overlay.className = "modal-overlay";
          overlay.setAttribute("role", "dialog");
          overlay.setAttribute("aria-modal", "true");

          const modal = document.createElement("div");
          modal.className = "modal-box";
          modal.innerHTML = `
            <h3>${info.heading}</h3>
            <ul class="modal-list">
              <li><strong>Airline:</strong> ${info.airline}</li>
              <li><strong>Flight #:</strong> ${info.flight}</li>
              <li><strong>Duration:</strong> ${info.duration}</li>
              <li><strong>Stops:</strong> ${info.stops}</li>
              <li><strong>Price:</strong> ${info.price}</li>
              <li><strong>Hotels:</strong> ${info.hotels}</li>
              <li><strong>Itinerary:</strong> ${info.itinerary}</li>
            </ul>
            <button type="button" class="btn btn-primary" style="width:100%;">Book now</button>
          `;

          overlay.appendChild(modal);

          function closeModal() {
            overlay.remove();
            document.removeEventListener("keydown", handleEscape);
          }

          function handleEscape(event) {
            if (event.key === "Escape") {
              closeModal();
            }
          }

          overlay.addEventListener("click", (event) => {
            if (event.target === overlay) {
              closeModal();
            }
          });
          document.addEventListener("keydown", handleEscape);

          document.body.appendChild(overlay);
        }

        document.addEventListener("DOMContentLoaded", () => {
          const cards = document.querySelectorAll(".flight-card");
          cards.forEach((card) => {
            card.addEventListener("click", () => {
              const key = card.dataset.flight || "default";
              openModal(flightDetails[key] || flightDetails.default);
            });
          });
        });
      })();
    </script>
  </body>
  </html>
